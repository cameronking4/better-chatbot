[0;32m[INFO][0m ==========================================
[0;32m[INFO][0m Azure AKS Deployment Configuration
[0;32m[INFO][0m ==========================================
Resource Group: better-chatbot-rg
Location: eastus
ACR Name: betterchatbotacr1764026619
AKS Name: better-chatbot-aks
Node Count: 2
Node Size: Standard_D2s_v3
[0;32m[INFO][0m ==========================================
[0;32m[INFO][0m Checking Azure CLI login status...
[0;32m[INFO][0m Using Azure subscription: Pay-As-You-Go
[0;32m[INFO][0m Creating resource group: better-chatbot-rg...
Location    Name
----------  -----------------
eastus      better-chatbot-rg
[0;32m[INFO][0m Creating Azure Container Registry: betterchatbotacr1764026619...
NAME                        RESOURCE GROUP     LOCATION    SKU    LOGIN SERVER                           CREATION DATE         ADMIN ENABLED
--------------------------  -----------------  ----------  -----  -------------------------------------  --------------------  ---------------
betterchatbotacr1764026619  better-chatbot-rg  eastus      Basic  betterchatbotacr1764026619.azurecr.io  2025-11-24T23:23:41Z  False
[0;32m[INFO][0m Enabling admin access on ACR...
{
  "adminUserEnabled": true,
  "anonymousPullEnabled": false,
  "autoGeneratedDomainNameLabelScope": "Unsecure",
  "creationDate": "2025-11-24T23:23:41.877602+00:00",
  "dataEndpointEnabled": false,
  "dataEndpointHostNames": [],
  "encryption": {
    "keyVaultProperties": null,
    "status": "disabled"
  },
  "id": "/subscriptions/5b3f67cc-ffa7-428b-9a17-2d278b10139e/resourceGroups/better-chatbot-rg/providers/Microsoft.ContainerRegistry/registries/betterchatbotacr1764026619",
  "identity": null,
  "location": "eastus",
  "loginServer": "betterchatbotacr1764026619.azurecr.io",
  "metadataSearch": "Disabled",
  "name": "betterchatbotacr1764026619",
  "networkRuleBypassOptions": "AzureServices",
  "networkRuleSet": null,
  "policies": {
    "azureAdAuthenticationAsArmPolicy": {
      "status": "enabled"
    },
    "exportPolicy": {
      "status": "enabled"
    },
    "quarantinePolicy": {
      "status": "disabled"
    },
    "retentionPolicy": {
      "days": 7,
      "lastUpdatedTime": "2025-11-24T23:23:49.390040+00:00",
      "status": "disabled"
    },
    "softDeletePolicy": {
      "lastUpdatedTime": "2025-11-24T23:23:49.390086+00:00",
      "retentionDays": 7,
      "status": "disabled"
    },
    "trustPolicy": {
      "status": "disabled",
      "type": "Notary"
    }
  },
  "privateEndpointConnections": [],
  "provisioningState": "Succeeded",
  "publicNetworkAccess": "Enabled",
  "resourceGroup": "better-chatbot-rg",
  "sku": {
    "name": "Basic",
    "tier": "Basic"
  },
  "status": null,
  "systemData": {
    "createdAt": "2025-11-24T23:23:41.877602+00:00",
    "createdBy": "cameronyking@gmail.com",
    "createdByType": "User",
    "lastModifiedAt": "2025-11-24T23:24:01.966171+00:00",
    "lastModifiedBy": "cameronyking@gmail.com",
    "lastModifiedByType": "User"
  },
  "tags": {},
  "type": "Microsoft.ContainerRegistry/registries",
  "zoneRedundancy": "Disabled"
}
[0;32m[INFO][0m ACR Login Server: betterchatbotacr1764026619.azurecr.io
[0;32m[INFO][0m Logging into ACR...
WARNING: The output will be changed in next breaking change release(2.73.0) scheduled for May 2025. Exit code will be 1 if command fails for docker login.
Login Succeeded
[0;32m[INFO][0m Building Docker image...
#0 building with "desktop-linux" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.30kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/node:23-alpine
#2 DONE 0.1s

#3 [internal] load .dockerignore
#3 transferring context: 699B done
#3 DONE 0.0s

#4 [internal] load build context
#4 DONE 0.0s

#5 [builder 1/5] FROM docker.io/library/node:23-alpine@sha256:a34e14ef1df25b58258956049ab5a71ea7f0d498e41d0b514f4b8de09af09456
#5 resolve docker.io/library/node:23-alpine@sha256:a34e14ef1df25b58258956049ab5a71ea7f0d498e41d0b514f4b8de09af09456 done
#5 DONE 0.0s

#6 [runner 3/8] RUN addgroup --system --gid 1001 nodejs
#6 CACHED

#7 [runner 4/8] RUN adduser --system --uid 1001 nextjs
#7 CACHED

#4 [internal] load build context
#4 transferring context: 110.49kB 0.0s done
#4 DONE 0.0s

#8 [builder 2/5] WORKDIR /app
#8 CACHED

#9 [builder 3/5] COPY . .
#9 DONE 0.0s

#10 [builder 4/5] RUN npm install
#10 2.402 npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead
#10 6.075 npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is
#10 6.103 npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
#10 11.01 
#10 11.01 > better-chatbot@1.26.0 postinstall
#10 11.01 > tsx scripts/postinstall.ts
#10 11.01 
#10 11.18 
#10 11.18 > better-chatbot@1.26.0 prepare
#10 11.18 > husky
#10 11.18 
#10 11.20 .git can't be found
#10 11.21 added 1193 packages, and audited 1194 packages in 11s
#10 11.21 
#10 11.21 367 packages are looking for funding
#10 11.21   run `npm fund` for details
#10 11.22 
#10 11.22 4 moderate severity vulnerabilities
#10 11.22 
#10 11.22 To address all issues (including breaking changes), run:
#10 11.22   npm audit fix --force
#10 11.22 
#10 11.22 Run `npm audit` for details.
#10 11.22 npm notice
#10 11.22 npm notice New major version of npm available! 10.9.2 -> 11.6.3
#10 11.22 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.3
#10 11.22 npm notice To update run: npm install -g npm@11.6.3
#10 11.22 npm notice
#10 DONE 11.5s

#11 [builder 5/5] RUN npm run build
#11 0.360 
#11 0.360 > better-chatbot@1.26.0 build
#11 0.360 > next build
#11 0.360 
#11 0.823 Attention: Next.js now collects completely anonymous telemetry regarding usage.
#11 0.823 This information is used to shape Next.js' roadmap and prioritize features.
#11 0.823 You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
#11 0.823 https://nextjs.org/telemetry
#11 0.823 
#11 0.834    â–² Next.js 16.0.3 (Turbopack)
#11 0.834    - Environments: .env.local, .env
#11 0.834    - Experiments (use with caution):
#11 0.834      âœ“ authInterrupts
#11 0.834      âœ“ taint
#11 0.834 
#11 0.876    Creating an optimized production build ...
#11 150.7  âœ“ Compiled successfully in 2.5min
#11 150.7    Running TypeScript ...
#11 163.2    Collecting page data using 15 workers ...
#11 163.8 [better-chatbot] â„¹ Creating file storage: vercel-blob
#11 163.8 [better-chatbot] â„¹ Creating file storage: vercel-blob
#11 163.8 [better-chatbot] â„¹ Creating file storage: vercel-blob
#11 164.1 [better-chatbot] â„¹ Creating file storage: vercel-blob
#11 164.2    Generating static pages using 15 workers (0/30) ...
#11 164.7 [better-chatbot] â„¹ Creating file storage: vercel-blob
#11 164.7    Generating static pages using 15 workers (7/30) 
#11 164.7    Generating static pages using 15 workers (14/30) 
#11 165.2    Generating static pages using 15 workers (22/30) 
#11 165.3 [better-chatbot] â„¹ Creating file storage: vercel-blob
#11 165.3  âœ“ Generating static pages using 15 workers (30/30) in 1079.5ms
#11 166.3    Finalizing page optimization ...
#11 166.7 
#11 166.7 Route (app)
#11 166.7 â”Œ Æ’ /
#11 166.7 â”œ Æ’ /_not-found
#11 166.7 â”œ Æ’ /admin/users
#11 166.7 â”œ Æ’ /admin/users/[id]
#11 166.7 â”œ Æ’ /agent/[id]
#11 166.7 â”œ Æ’ /agents
#11 166.7 â”œ Æ’ /api/agent
#11 166.7 â”œ Æ’ /api/agent/[id]
#11 166.7 â”œ Æ’ /api/agent/ai
#11 166.7 â”œ Æ’ /api/archive
#11 166.7 â”œ Æ’ /api/archive/[id]
#11 166.7 â”œ Æ’ /api/archive/[id]/items
#11 166.7 â”œ Æ’ /api/archive/[id]/items/[itemId]
#11 166.7 â”œ Æ’ /api/auth/[...all]
#11 166.7 â”œ Æ’ /api/auth/error
#11 166.7 â”œ Æ’ /api/bookmark
#11 166.7 â”œ Æ’ /api/chat
#11 166.7 â”œ Æ’ /api/chat/export
#11 166.7 â”œ Æ’ /api/chat/models
#11 166.7 â”œ Æ’ /api/chat/openai-realtime
#11 166.7 â”œ Æ’ /api/chat/temporary
#11 166.7 â”œ Æ’ /api/chat/title
#11 166.7 â”œ Æ’ /api/export
#11 166.7 â”œ Æ’ /api/export/[id]
#11 166.7 â”œ Æ’ /api/export/[id]/comments
#11 166.7 â”œ Æ’ /api/export/[id]/comments/[commentId]
#11 166.7 â”œ Æ’ /api/mcp
#11 166.7 â”œ Æ’ /api/mcp/[id]
#11 166.7 â”œ Æ’ /api/mcp/list
#11 166.7 â”œ Æ’ /api/mcp/oauth/callback
#11 166.7 â”œ Æ’ /api/mcp/server-customizations/[server]
#11 166.7 â”œ Æ’ /api/mcp/tool-customizations/[server]
#11 166.7 â”œ Æ’ /api/mcp/tool-customizations/[server]/[tool]
#11 166.7 â”œ Æ’ /api/storage/ingest
#11 166.7 â”œ Æ’ /api/storage/upload
#11 166.7 â”œ Æ’ /api/storage/upload-url
#11 166.7 â”œ Æ’ /api/thread
#11 166.7 â”œ Æ’ /api/user/details
#11 166.7 â”œ Æ’ /api/user/details/[id]
#11 166.7 â”œ Æ’ /api/user/preferences
#11 166.7 â”œ Æ’ /api/workflow
#11 166.7 â”œ Æ’ /api/workflow/[id]
#11 166.7 â”œ Æ’ /api/workflow/[id]/execute
#11 166.7 â”œ Æ’ /api/workflow/[id]/structure
#11 166.7 â”œ Æ’ /api/workflow/tools
#11 166.7 â”œ Æ’ /archive/[id]
#11 166.7 â”œ Æ’ /chat/[thread]
#11 166.7 â”œ Æ’ /export/[id]
#11 166.7 â”œ Æ’ /mcp
#11 166.7 â”œ Æ’ /mcp/create
#11 166.7 â”œ Æ’ /mcp/modify/[id]
#11 166.7 â”œ Æ’ /mcp/test/[id]
#11 166.7 â”œ Æ’ /sign-in
#11 166.7 â”œ Æ’ /sign-up
#11 166.7 â”œ Æ’ /sign-up/email
#11 166.7 â”œ Æ’ /workflow
#11 166.7 â”” Æ’ /workflow/[id]
#11 166.7 
#11 166.7 
#11 166.7 Æ’ Proxy (Middleware)
#11 166.7 
#11 166.7 Æ’  (Dynamic)  server-rendered on demand
#11 166.7 
#11 DONE 166.9s

#12 [runner 5/8] COPY --from=builder /app/public ./public
#12 DONE 0.0s

#13 [runner 6/8] COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
#13 DONE 0.3s

#14 [runner 7/8] COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static
#14 DONE 0.1s

#15 [runner 8/8] COPY --from=builder /app/src/lib/db/migrations ./src/lib/db/migrations
#15 DONE 0.0s

#16 exporting to image
#16 exporting layers
#16 exporting layers 2.2s done
#16 exporting manifest sha256:05dbfaafe0211eac55cf8685bf196a2eedd81709072e4d93b63c746865629b22
#16 exporting manifest sha256:05dbfaafe0211eac55cf8685bf196a2eedd81709072e4d93b63c746865629b22 done
#16 exporting config sha256:e6a7a125cf49bfd7fb52dbb793ab86bfb4cf19b66bea8092471ca68d5944b920 done
#16 exporting attestation manifest sha256:91ed423f4acfb71a163876a15a2fba973bd4c01e9aad3a4900b8db580bb73344 0.0s done
#16 exporting manifest list sha256:d5154a418184b2ea05a41607e2423dc1554f772427cc7140c90877b38e50e3ce done
#16 naming to betterchatbotacr1764026619.azurecr.io/better-chatbot:latest done
#16 unpacking to betterchatbotacr1764026619.azurecr.io/better-chatbot:latest
#16 unpacking to betterchatbotacr1764026619.azurecr.io/better-chatbot:latest 0.7s done
#16 DONE 2.9s
[0;32m[INFO][0m Pushing image to ACR...
The push refers to repository [betterchatbotacr1764026619.azurecr.io/better-chatbot]
d716cbecf393: Waiting
9e2130bee44e: Waiting
2c24ef863d80: Waiting
fadb636ca690: Waiting
00f424b9dd1d: Waiting
baaf468aa51f: Waiting
49b04c3e5849: Waiting
70563f461ecc: Waiting
5bfa562af50a: Waiting
f3db227756d3: Waiting
d69d4d41cfe2: Waiting
a078b3ff0fd0: Waiting
70563f461ecc: Waiting
5bfa562af50a: Waiting
f3db227756d3: Waiting
d69d4d41cfe2: Waiting
a078b3ff0fd0: Waiting
d716cbecf393: Waiting
9e2130bee44e: Waiting
2c24ef863d80: Waiting
fadb636ca690: Waiting
00f424b9dd1d: Waiting
baaf468aa51f: Waiting
49b04c3e5849: Waiting
a078b3ff0fd0: Waiting
70563f461ecc: Waiting
5bfa562af50a: Waiting
f3db227756d3: Waiting
d69d4d41cfe2: Waiting
49b04c3e5849: Waiting
d716cbecf393: Waiting
9e2130bee44e: Waiting
2c24ef863d80: Waiting
fadb636ca690: Waiting
00f424b9dd1d: Waiting
baaf468aa51f: Waiting
70563f461ecc: Waiting
5bfa562af50a: Waiting
f3db227756d3: Waiting
d69d4d41cfe2: Waiting
a078b3ff0fd0: Waiting
d716cbecf393: Waiting
9e2130bee44e: Waiting
2c24ef863d80: Waiting
fadb636ca690: Waiting
00f424b9dd1d: Waiting
baaf468aa51f: Waiting
49b04c3e5849: Waiting
d716cbecf393: Waiting
2c24ef863d80: Waiting
d716cbecf393: Waiting
70563f461ecc: Pushed
f3db227756d3: Pushed
49b04c3e5849: Pushed
9e2130bee44e: Pushed
00f424b9dd1d: Pushed
d716cbecf393: Pushed
2c24ef863d80: Pushed
a078b3ff0fd0: Pushed
d69d4d41cfe2: Pushed
fadb636ca690: Pushed
5bfa562af50a: Pushed
baaf468aa51f: Pushed
latest: digest: sha256:d5154a418184b2ea05a41607e2423dc1554f772427cc7140c90877b38e50e3ce size: 856
[0;32m[INFO][0m Image pushed successfully: betterchatbotacr1764026619.azurecr.io/better-chatbot:latest
[0;32m[INFO][0m Creating AKS cluster: better-chatbot-aks (this may take 5-10 minutes)...
WARNING: The default value of '--node-vm-size' will be changed to 'Dynamically Selected By Azure' from 'Standard_DS2_V2 (Linux), Standard_DS2_V3 (Windows)' in next breaking change release(2.73.0) scheduled for May 2025.
WARNING: SSH key files '/Users/cameronking/.ssh/id_rsa' and '/Users/cameronking/.ssh/id_rsa.pub' have been generated under ~/.ssh to allow SSH access to the VM. If using machines without permanent storage like Azure Cloud Shell without an attached file share, back up your keys to a safe location
AAD role propagation done[############################################]  100.0000%AzurePortalFqdn                                                          CurrentKubernetesVersion    DisableLocalAccounts    DnsPrefix                           EnableRbac    Fqdn                                                              KubernetesVersion    Location    MaxAgentPools    Name                NodeResourceGroup                               ProvisioningState    ResourceGroup      ResourceUid               SupportPlan
-----------------------------------------------------------------------  --------------------------  ----------------------  ----------------------------------  ------------  ----------------------------------------------------------------  -------------------  ----------  ---------------  ------------------  ----------------------------------------------  -------------------  -----------------  ------------------------  ------------------
better-cha-better-chatbot-r-5b3f67-qk0p3496.portal.hcp.eastus.azmk8s.io  1.32.9                      False                   better-cha-better-chatbot-r-5b3f67  True          better-cha-better-chatbot-r-5b3f67-qk0p3496.hcp.eastus.azmk8s.io  1.32                 eastus      100              better-chatbot-aks  MC_better-chatbot-rg_better-chatbot-aks_eastus  Succeeded            better-chatbot-rg  6924e9f667757b00016ea884  KubernetesOfficial
[0;32m[INFO][0m Getting AKS credentials...
WARNING: Merged "better-chatbot-aks" as current context in /Users/cameronking/.kube/config
[0;32m[INFO][0m Verifying Kubernetes connection...
NAME                                STATUS   ROLES    AGE   VERSION
aks-nodepool1-41730811-vmss000000   Ready    <none>   71s   v1.32.9
aks-nodepool1-41730811-vmss000001   Ready    <none>   67s   v1.32.9
[0;32m[INFO][0m Creating Kubernetes namespace...
namespace/better-chatbot unchanged
[0;32m[INFO][0m Creating Kubernetes secrets from .env file...
error: cannot add key FILE_BASED_MCP_CONFIG, another key by that name already exists
error: no objects passed to apply
